<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>


<fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
</fb:login-button>

<script>
 
  function statusChangeCallback(response) 
  {
	if (response.status === 'connected') 
	{
	  testAPI();
	}
  }

 
  function checkLoginState() 
  {
	FB.getLoginStatus(function(response)
	{
	  statusChangeCallback(response);
	});
  }

  window.fbAsyncInit = function()
  {
	FB.init({
	  appId      : '105721476642769',
	  cookie     : true,  
						  
	  xfbml      : true,  
	  version    : 'v2.8' 
	});

	FB.getLoginStatus(function(response) {
	  statusChangeCallback(response);
	});
  };

  // Load the SDK asynchronously
  (function(d, s, id) 
  {
	var js, fjs = d.getElementsByTagName(s)[0];
	if (d.getElementById(id)) return;
	js = d.createElement(s); js.id = id;
	js.src = "//connect.facebook.net/en_US/sdk.js";
	fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));

  // Here we run a very simple test of the Graph API after login is
  // successful.  See statusChangeCallback() for when this call is made.
  function testAPI()
  {
	FB.api('/me', function(response) {




//SALVATION

//bo si henčič sam unJquerijal
$.ajax({
	 url :"/loginFacebook",
	 type: "POST",
	 data: response,
	 success: function(response){
		console.log("sucess");

	 },
	 error:function(response){
		 console.log("something went wrong");
	 }
 });

//SALVATION END

	});
  }
</script>

<!--
  Below we include the Login Button social plugin. This button uses
  the JavaScript SDK to present a graphical Login button that triggers
  the FB.login() function when clicked.
-->

<div id="status">
</div>